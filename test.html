<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS GENESIS | L'Architecte d'Identité Numérique</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;900&family=Rajdhani:wght@300;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- Markdown Parser (pour l'IA) -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        /* --- SYSTEM CORE STYLES --- */
        :root {
            --neon-cyan: #00f3ff;
            --deep-void: #050505;
            --panel-bg: rgba(10, 10, 12, 0.9);
            --glass-border: rgba(255, 255, 255, 0.08);
            --acid-green: #ccff00;
        }

        body {
            background-color: var(--deep-void);
            color: white;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            cursor: none !important;
        }

        h1, h2, h3, .brand-font { font-family: 'Rajdhani', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #050505; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 4px; border: 1px solid #000; }
        ::-webkit-scrollbar-thumb:hover { background: var(--neon-cyan); }

        /* --- ANIMATIONS --- */
        @keyframes aurora {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .aurora-bg {
            background: linear-gradient(-45deg, #000000, #0f172a, #000000, #1e1b4b);
            background-size: 400% 400%;
            animation: aurora 20s ease infinite;
            position: fixed; inset: 0; z-index: -2;
        }
        .grid-overlay {
            position: fixed; inset: 0; z-index: -1;
            background-image: linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            mask-image: radial-gradient(circle at center, black, transparent 80%);
        }

        /* Panels */
        .glass-panel {
            background: var(--panel-bg);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        /* Glitch Text */
        .glitch { position: relative; }
        .glitch::before, .glitch::after {
            content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        }
        .glitch::before {
            left: 2px; text-shadow: -1px 0 #ff00c1; clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 5s infinite linear alternate-reverse;
        }
        .glitch::after {
            left: -2px; text-shadow: -1px 0 #00fff9; clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim2 5s infinite linear alternate-reverse;
        }
        @keyframes glitch-anim {
            0% { clip: rect(12px, 9999px, 32px, 0); }
            5% { clip: rect(64px, 9999px, 10px, 0); }
            100% { clip: rect(24px, 9999px, 84px, 0); }
        }
        @keyframes glitch-anim2 {
            0% { clip: rect(82px, 9999px, 12px, 0); }
            5% { clip: rect(14px, 9999px, 70px, 0); }
            100% { clip: rect(5px, 9999px, 34px, 0); }
        }

        /* Cursor Fix */
        #cursor {
            width: 20px; height: 20px; border: 1px solid var(--neon-cyan);
            position: fixed; top: 0; left: 0; border-radius: 50%; pointer-events: none; z-index: 9999;
            transition: transform 0.1s ease; mix-blend-mode: difference;
        }
        #cursor-dot {
            width: 4px; height: 4px; background: var(--neon-cyan);
            position: fixed; top: 0; left: 0; border-radius: 50%; pointer-events: none; z-index: 9999;
        }
        body.hovering #cursor { transform: scale(2.5); background: rgba(0, 243, 255, 0.1); border-color: var(--neon-cyan); }

        /* Buttons & Inputs */
        .btn-primary {
            background: linear-gradient(90deg, rgba(0,243,255,0.1), rgba(0,243,255,0.0));
            border: 1px solid var(--neon-cyan); color: var(--neon-cyan);
            text-transform: uppercase; font-family: 'JetBrains Mono', monospace; font-weight: bold;
            letter-spacing: 2px; position: relative; overflow: hidden; transition: all 0.3s;
            cursor: none; z-index: 50;
        }
        .btn-primary:hover { background: var(--neon-cyan); color: black; box-shadow: 0 0 20px var(--neon-cyan); }
        
        .cyber-input {
            background: rgba(0,0,0,0.4); border: 1px solid #333; color: white;
            font-family: 'JetBrains Mono', monospace; transition: 0.3s; cursor: text;
        }
        .cyber-input:focus { border-color: var(--neon-cyan); outline: none; box-shadow: 0 0 10px rgba(0, 243, 255, 0.1); }

        /* Sections Logic */
        .active-section { display: block !important; animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .list-item-anim { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }

        button, a { cursor: none; }
    </style>
</head>
<body>

    <!-- Backgrounds -->
    <div class="aurora-bg"></div>
    <div class="grid-overlay"></div>
    <canvas id="particle-canvas" class="fixed inset-0 z-[-1] opacity-40"></canvas>

    <!-- Custom Cursor Elements -->
    <div id="cursor"></div>
    <div id="cursor-dot"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-[60] glass-panel border-b border-white/10 px-4 md:px-6 py-4 flex justify-between items-center flex-wrap gap-4">
        <div class="flex items-center gap-2 cursor-pointer hover-trigger" onclick="switchView('home')">
            <div class="w-3 h-3 bg-cyan-400 rounded-full shadow-[0_0_10px_#06b6d4]"></div>
            <span class="brand-font text-xl font-bold tracking-widest">NEXUS<span class="text-cyan-400">GENESIS</span></span>
        </div>
        <div class="flex gap-4 md:gap-8 text-[10px] md:text-xs mono uppercase tracking-widest text-gray-400 items-center">
            <button onclick="switchView('home')" class="hover:text-cyan-400 transition-colors hover-trigger">Accueil</button>
            <button onclick="switchView('builder')" class="hover:text-cyan-400 transition-colors hover-trigger">Le Labo</button>
            <button onclick="switchView('pricing')" class="hover:text-cyan-400 transition-colors hover-trigger">Tarifs</button>
        </div>
        <button onclick="switchView('builder')" class="btn-primary px-4 py-2 text-[10px] md:text-xs hover-trigger">
            Démarrer
        </button>
    </nav>

    <!-- === SECTION: HOME (Default Visible) === -->
    <section id="view-home" class="active-section relative pb-20">
        
        <div class="min-h-screen flex flex-col justify-center items-center text-center relative z-10 pt-32 pb-20 container mx-auto px-6">
            <div class="inline-block px-4 py-1 border border-cyan-500/30 rounded-full bg-cyan-500/5 text-cyan-400 text-xs mono mb-8 tracking-[0.3em]">
                SYSTEME V3.7 MASTER
            </div>
            
            <h1 class="text-6xl md:text-9xl font-black leading-tight mb-6 glitch" data-text="FORGEZ VOTRE">
                FORGEZ VOTRE<br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-white to-purple-500">IDENTITÉ NUMÉRIQUE</span>
            </h1>
            
            <p class="max-w-2xl text-gray-400 text-lg md:text-xl mb-12 leading-relaxed">
                Arrêtez d'envoyer des CVs PDF. Envoyez une expérience.
                <br>Nexus Genesis transforme vos données en un portfolio web <span class="text-cyan-400">ultra-premium</span> et interactif en quelques secondes.
            </p>

            <div class="flex flex-col md:flex-row gap-6 w-full justify-center">
                <button onclick="switchView('builder')" class="btn-primary px-10 py-4 text-sm md:text-base group hover-trigger relative z-20">
                    <span class="group-hover:mr-2 transition-all">Initialiser la Création</span>
                    <i data-lucide="chevron-right" class="inline w-4 h-4 opacity-0 group-hover:opacity-100 transition-all"></i>
                </button>
                <button onclick="document.getElementById('demo-preview').scrollIntoView({behavior:'smooth'})" class="px-10 py-4 border border-white/20 text-white hover:bg-white/5 transition-all text-sm md:text-base mono tracking-widest uppercase hover-trigger relative z-20">
                    Voir la Démo
                </button>
            </div>
        </div>

        <!-- Templates Library -->
        <div id="demo-preview" class="container mx-auto px-6 pt-10 pb-32">
            <div class="text-center mb-16">
                <h2 class="text-3xl font-bold text-white mb-2 brand-font">BIBLIOTHÈQUE DE <span class="text-cyan-400">TEMPLATES</span></h2>
                <div class="h-1 w-24 bg-cyan-500 mx-auto"></div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- TEMPLATE 1: ORION -->
                <div class="relative w-full aspect-video bg-black rounded-lg border border-cyan-500/50 overflow-hidden shadow-[0_0_30px_rgba(6,182,212,0.15)] group">
                    <div class="h-6 bg-gray-900 border-b border-gray-800 flex items-center px-2 gap-1">
                        <div class="w-2 h-2 rounded-full bg-red-500"></div><div class="w-2 h-2 rounded-full bg-yellow-500"></div><div class="w-2 h-2 rounded-full bg-green-500"></div>
                    </div>
                    <div class="absolute inset-0 top-6 flex flex-col items-center justify-center bg-gray-900 group-hover:scale-105 transition-transform duration-500">
                        <div class="text-cyan-400 mb-2 font-bold brand-font text-3xl">ORION</div>
                        <div class="text-[10px] text-gray-500 mono">Cyber-Minimaliste Dark Mode</div>
                    </div>
                    <div class="absolute inset-0 bg-black/80 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-sm">
                        <button onclick="selectTheme('orion')" class="btn-primary px-6 py-2 text-xs hover-trigger mb-2">SÉLECTIONNER</button>
                        <span class="text-[10px] text-green-400 mono flex items-center gap-1"><i data-lucide="check-circle" class="w-3 h-3"></i> DISPONIBLE</span>
                    </div>
                </div>

                <!-- TEMPLATE 2: VANGUARD -->
                <div class="relative w-full aspect-video bg-[#f2f2f0] rounded-lg border border-white overflow-hidden shadow-[0_0_30px_rgba(255,255,255,0.2)] group">
                    <div class="h-6 bg-white border-b border-gray-200 flex items-center px-2 gap-1">
                        <div class="w-2 h-2 rounded-full bg-black"></div><div class="w-2 h-2 rounded-full bg-black"></div>
                    </div>
                    <div class="absolute inset-0 top-6 flex flex-col items-center justify-center bg-[#f2f2f0] group-hover:scale-105 transition-transform duration-500">
                        <div class="text-black mb-2 font-bold text-3xl" style="font-family: 'Inter', sans-serif;">VANGUARD</div>
                        <div class="text-[10px] text-gray-500 mono bg-[#ccff00] px-2 text-black">Brutalist Light Mode</div>
                    </div>
                    <div class="absolute inset-0 bg-white/90 flex flex-col items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-sm">
                        <button onclick="selectTheme('vanguard')" class="px-6 py-2 bg-black text-[#ccff00] font-bold text-xs uppercase hover:bg-[#ccff00] hover:text-black transition-colors hover-trigger mb-2">SÉLECTIONNER</button>
                        <span class="text-[10px] text-black mono font-bold flex items-center gap-1"><i data-lucide="check-circle" class="w-3 h-3"></i> DISPONIBLE</span>
                    </div>
                </div>

                <!-- LOCKED -->
                <div class="relative w-full aspect-video bg-black/50 rounded-lg border border-white/5 overflow-hidden opacity-60">
                    <div class="h-6 bg-black/80 border-b border-white/5 flex items-center px-2 gap-1">
                        <div class="w-2 h-2 rounded-full bg-gray-700"></div><div class="w-2 h-2 rounded-full bg-gray-700"></div>
                    </div>
                    <div class="absolute inset-0 top-6 flex flex-col items-center justify-center">
                        <i data-lucide="lock" class="w-8 h-8 text-gray-600 mb-2"></i>
                        <div class="text-gray-500 font-bold brand-font text-xl">AETHER</div>
                    </div>
                    <div class="absolute bottom-4 left-1/2 -translate-x-1/2 px-3 py-1 bg-white/5 border border-white/10 text-gray-400 text-[10px] mono rounded-full">Bientôt disponible</div>
                </div>
            </div>
        </div>
        
        <!-- Home Footer -->
        <footer class="border-t border-white/10 py-12 bg-black text-center relative z-10">
            <div class="brand-font text-2xl font-bold mb-2 text-white tracking-widest">NEXUS<span class="text-cyan-400">GENESIS</span></div>
            <p class="text-xs text-gray-600 mono uppercase">Propulsé par Gemini Neural Network & WebGL</p>
        </footer>
    </section>

    <!-- === SECTION: BUILDER === -->
    <section id="view-builder" style="display: none;" class="hidden-section pt-20 min-h-screen h-screen flex flex-col">
        <div class="flex-1 flex flex-col lg:flex-row overflow-hidden h-full">
            <!-- Controls -->
            <div class="w-full lg:w-1/3 bg-black/80 border-r border-white/10 flex flex-col h-full overflow-hidden">
                <div class="p-4 bg-gray-900 border-b border-white/10 flex justify-between items-center">
                    <div class="text-xs text-gray-400 mono">THEME ACTIF: <span id="active-theme-label" class="text-cyan-400 font-bold">ORION</span></div>
                    <button onclick="switchView('home')" class="text-[10px] border border-white/20 px-2 py-1 rounded hover:bg-white/10 hover-trigger">CHANGER</button>
                </div>
                <div class="flex border-b border-white/10 bg-gray-900/50">
                    <button onclick="setTab('profile')" class="tab-btn active-tab flex-1 py-4 text-xs mono uppercase text-center border-b-2 border-cyan-400 text-white hover:bg-white/5 hover-trigger">Profil</button>
                    <button onclick="setTab('exp')" class="tab-btn flex-1 py-4 text-xs mono uppercase text-center border-b-2 border-transparent text-gray-500 hover:text-white hover:bg-white/5 hover-trigger">Exp.</button>
                    <button onclick="setTab('skills')" class="tab-btn flex-1 py-4 text-xs mono uppercase text-center border-b-2 border-transparent text-gray-500 hover:text-white hover:bg-white/5 hover-trigger">Skills</button>
                    <button onclick="setTab('passions')" class="tab-btn flex-1 py-4 text-xs mono uppercase text-center border-b-2 border-transparent text-gray-500 hover:text-white hover:bg-white/5 hover-trigger">Passions</button>
                </div>
                <div class="flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar">
                    <!-- Profile Tab -->
                    <div id="tab-profile" class="tab-content space-y-4">
                        <div class="space-y-1"><label class="text-xs text-gray-500 mono uppercase">Nom Complet</label><input type="text" id="input-name" class="w-full p-3 rounded cyber-input" value="" placeholder="Ex: Jean Dupont" oninput="updatePreview()"></div>
                        <div class="space-y-1"><label class="text-xs text-gray-500 mono uppercase">Titre / Rôle</label><input type="text" id="input-role" class="w-full p-3 rounded cyber-input" value="" placeholder="Ex: Digital Marketing Manager" oninput="updatePreview()"></div>
                        <div class="space-y-1">
                            <div class="flex justify-between items-center"><label class="text-xs text-gray-500 mono uppercase">Bio</label><button onclick="generateAIBio()" class="text-[10px] text-cyan-400 border border-cyan-900 px-2 py-1 rounded hover:bg-cyan-900/30 transition-colors flex items-center gap-1 hover-trigger"><i data-lucide="sparkles" class="w-3 h-3"></i> IA OPTIMIZER</button></div>
                            <textarea id="input-bio" rows="4" class="w-full p-3 rounded cyber-input text-sm" placeholder="Votre biographie..." oninput="updatePreview()"></textarea>
                            <div id="ai-loading" class="hidden text-xs text-cyan-500 mono animate-pulse">Connexion à Gemini Neural Network...</div>
                        </div>
                        <div class="space-y-1"><label class="text-xs text-gray-500 mono uppercase">Email Contact</label><input type="text" id="input-email" class="w-full p-3 rounded cyber-input" value="" placeholder="contact@email.com" oninput="updatePreview()"></div>
                        <div class="space-y-1"><label class="text-xs text-gray-500 mono uppercase">Lien CV (PDF)</label><input type="text" id="input-cv" class="w-full p-3 rounded cyber-input" value="#" placeholder="mon-cv.pdf"></div>
                    </div>
                    <!-- Exp Tab -->
                    <div id="tab-exp" class="tab-content hidden space-y-6">
                        <div id="experience-list" class="space-y-4"></div>
                        <button onclick="addExperience()" class="w-full py-3 border border-dashed border-gray-700 text-gray-500 rounded hover:border-cyan-500 hover:text-cyan-400 transition-all text-xs uppercase mono tracking-widest hover-trigger">+ Ajouter une expérience</button>
                    </div>
                    <!-- Skills Tab -->
                    <div id="tab-skills" class="tab-content hidden space-y-4">
                        <div id="skills-list" class="space-y-3"></div>
                        <button onclick="addSkill()" class="w-full py-3 border border-dashed border-gray-700 text-gray-500 rounded hover:border-cyan-500 hover:text-cyan-400 transition-all text-xs uppercase mono tracking-widest hover-trigger">+ Ajouter une compétence</button>
                    </div>
                    <!-- Passions Tab (NEW) -->
                    <div id="tab-passions" class="tab-content hidden space-y-4">
                        <div id="passions-list" class="space-y-3"></div>
                        <button onclick="addPassion()" class="w-full py-3 border border-dashed border-gray-700 text-gray-500 rounded hover:border-cyan-500 hover:text-cyan-400 transition-all text-xs uppercase mono tracking-widest hover-trigger">+ Ajouter une passion</button>
                    </div>
                </div>
                <div class="p-6 border-t border-white/10 bg-gray-900 flex flex-col gap-3">
                    <button onclick="exportPortfolio()" class="btn-primary w-full py-3 flex items-center justify-center gap-2 hover-trigger"><i data-lucide="download"></i> EXPORTER LE SITE (.html)</button>
                </div>
            </div>
            <!-- Preview -->
            <div class="hidden lg:block w-2/3 bg-black relative">
                <iframe id="preview-frame" class="w-full h-full border-none"></iframe>
            </div>
        </div>
    </section>

    <!-- === SECTION: PRICING (Hidden) === -->
    <section id="view-pricing" style="display: none;" class="hidden-section pt-32 min-h-screen flex flex-col items-center justify-center relative overflow-hidden">
        <div class="container mx-auto px-6 text-center relative z-10">
            <h2 class="text-5xl md:text-8xl font-black mb-4 glitch" data-text="ACCÈS PREMIUM">ACCÈS PREMIUM</h2>
             <button onclick="switchView('home')" class="mt-8 border border-white px-6 py-2 hover:bg-white hover:text-black transition-all hover-trigger">RETOUR</button>
        </div>
    </section>

    <script>
        // --- GLOBAL STATE ---
        const apiKey = "AIzaSyAQcrF8ghsZK9km0nlgj5u9qjed5FgHgg0"; 
        let currentTheme = 'orion'; // 'orion' or 'vanguard'

        // --- NAVIGATION ---
        function switchView(viewName) {
            const views = ['home', 'pricing', 'builder'];
            views.forEach(v => {
                const el = document.getElementById(`view-${v}`);
                if(el) {
                    if(v === viewName) {
                        el.style.display = 'block';
                        el.classList.remove('hidden-section');
                        el.classList.add('active-section');
                    } else {
                        el.style.display = 'none';
                        el.classList.remove('active-section');
                        el.classList.add('hidden-section');
                    }
                }
            });
            window.scrollTo(0,0);
            if(viewName === 'builder') setTimeout(updatePreview, 50);
        }

        function selectTheme(themeName) {
            currentTheme = themeName;
            document.getElementById('active-theme-label').innerText = themeName.toUpperCase();
            
            // Update UI color hints based on theme
            const label = document.getElementById('active-theme-label');
            if(themeName === 'vanguard') {
                label.className = "text-[#ccff00] font-bold";
            } else {
                label.className = "text-cyan-400 font-bold";
            }
            
            switchView('builder');
        }

        function setTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`tab-${tabName}`).classList.remove('hidden');
            
            // Visual feedback for tabs
            document.querySelectorAll('.tab-btn').forEach(el => {
                el.classList.remove('active-tab', 'border-cyan-400', 'text-white'); 
                el.classList.add('border-transparent', 'text-gray-500');
            });
            if(event && event.target) { 
                event.target.classList.remove('border-transparent', 'text-gray-500'); 
                event.target.classList.add('border-cyan-400', 'text-white'); 
            }
        }

        // --- DATA HANDLING ---
        function getDataFromForm() {
            const expElements = document.querySelectorAll('.exp-item');
            const experiences = Array.from(expElements).map(el => ({
                title: el.querySelector('.exp-title').value, 
                company: el.querySelector('.exp-company').value, 
                desc: el.querySelector('.exp-desc').value
            }));
            const skillElements = document.querySelectorAll('.skill-item');
            const skills = Array.from(skillElements).map(el => ({
                name: el.querySelector('.skill-name').value, 
                val: el.querySelector('.skill-val').value
            }));
            const passionElements = document.querySelectorAll('.passion-item');
            const passions = Array.from(passionElements).map(el => ({
                name: el.querySelector('.passion-name').value, 
                desc: el.querySelector('.passion-desc').value
            }));

            return {
                name: document.getElementById('input-name').value || "UTILISATEUR", 
                role: document.getElementById('input-role').value || "POSTE",
                bio: document.getElementById('input-bio').value || "Biographie...", 
                email: document.getElementById('input-email').value || "email@test.com",
                cv: document.getElementById('input-cv').value || "#", 
                experiences: experiences, 
                skills: skills,
                passions: passions
            };
        }

        // --- TEMPLATE GENERATOR: ORION ---
        function getOrionHTML(data) {
            const displayName = data.name && data.name.length > 0 ? data.name.split(' ')[0].toUpperCase() : "USER";
            const experiencesHTML = data.experiences.map((exp) => `
                <div class="relative group mb-12 pl-8 border-l border-gray-800">
                    <div class="absolute -left-[5px] top-1 w-3 h-3 bg-black border border-cyan-500 rounded-full group-hover:bg-cyan-500 transition-colors shadow-[0_0_10px_rgba(6,182,212,0.5)]"></div>
                    <h4 class="text-2xl font-bold text-white uppercase tracking-tight">${exp.title}</h4>
                    <div class="text-sm text-cyan-400 font-mono mb-2 tracking-widest">${exp.company.toUpperCase()}</div>
                    <p class="text-gray-400 text-base leading-relaxed">${exp.desc}</p>
                </div>
            `).join('');
            
            const skillsHTML = data.skills.map((skill) => `
                <div class="mb-6">
                    <div class="flex justify-between mb-2 font-mono text-xs text-gray-400 uppercase tracking-widest"><span>${skill.name}</span><span>${skill.val}%</span></div>
                    <div class="w-full h-1 bg-gray-900 rounded overflow-hidden border border-white/5"><div class="h-full bg-gradient-to-r from-cyan-600 to-blue-600 shadow-[0_0_10px_rgba(6,182,212,0.4)] relative" style="width: ${skill.val}%"><div class="absolute right-0 top-0 bottom-0 w-1 bg-white/50"></div></div></div>
                </div>
            `).join('');

            const passionsHTML = data.passions.map((pass) => `
                <div class="p-6 bg-white/5 border border-white/10 hover:border-cyan-500/50 transition-colors group">
                    <h3 class="text-xl font-bold text-white mb-2 group-hover:text-cyan-400 transition-colors">${pass.name}</h3>
                    <p class="text-sm text-gray-400">${pass.desc}</p>
                </div>
            `).join('');

            return `<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>${data.name} - Orion</title><script src="https://cdn.tailwindcss.com">${"<" + "/script>"}<script src="https://unpkg.com/lucide@latest">${"<" + "/script>"}<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet"><style>body{background-color:#030303;color:white;font-family:'Inter',sans-serif;overflow-x:hidden;}.aurora-bg{background:linear-gradient(-45deg,#000000,#0a192f,#000000,#0f2027);background-size:400% 400%;animation:aurora-shift 15s ease infinite;position:fixed;inset:0;z-index:-1;opacity:0.5;}@keyframes aurora-shift{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}.scanlines{position:fixed;inset:0;z-index:2;pointer-events:none;background:linear-gradient(rgba(18,16,16,0) 50%,rgba(0,0,0,0.25) 50%);background-size:100% 4px;opacity:0.3;}.font-mono{font-family:'JetBrains Mono',monospace;}.glitch-text:hover{color:#06b6d4;text-shadow:2px 0 #fff,-2px 0 #06b6d4;transition:0.2s;}</style></head><body><div class="aurora-bg"></div><div class="scanlines"></div><header class="fixed w-full z-50 px-6 py-6 flex justify-between items-center mix-blend-difference text-white"><div class="font-bold text-xl tracking-tighter flex items-center gap-2 cursor-default"><div class="w-3 h-3 bg-cyan-500 rounded-full animate-pulse"></div>${displayName}.SYS</div><nav class="hidden md:flex gap-6 text-xs font-bold uppercase tracking-widest"><a href="#exp" class="hover:text-cyan-400 transition-colors">Parcours</a><a href="mailto:${data.email}" class="hover:text-cyan-400 transition-colors">Contact</a></nav><a href="mailto:${data.email}" class="md:hidden text-xs font-bold uppercase tracking-widest border border-white/20 px-4 py-2 rounded hover:bg-white/5">Contact</a></header><section class="min-h-screen w-full flex items-center justify-center px-6 relative pt-20"><div class="max-w-5xl w-full grid md:grid-cols-12 gap-12 items-center"><div class="md:col-span-8"><div class="flex items-center gap-4 mb-6"><div class="h-[1px] w-12 bg-cyan-400 shadow-[0_0_10px_#06b6d4]"></div><span class="text-cyan-400 tracking-[0.5em] text-xs uppercase font-bold">Dossier Confidentiel</span></div><h1 class="text-6xl md:text-8xl font-black text-white leading-[0.9] mb-6 glitch-text cursor-default">${data.name.toUpperCase()}</h1><h2 class="text-xl md:text-3xl font-light text-gray-300 mt-2 font-mono">${data.role.toUpperCase()} <span class="text-cyan-500 animate-blink">_</span></h2><p class="max-w-xl mt-8 text-gray-400 leading-relaxed text-lg">${data.bio}</p><div class="mt-12 flex flex-wrap gap-6"><a href="#exp" class="px-8 py-4 bg-white text-black font-bold uppercase tracking-widest hover:bg-cyan-400 transition-colors text-xs">Analyser le parcours</a><a href="${data.cv}" class="px-8 py-4 border border-white/20 text-white font-bold uppercase tracking-widest hover:bg-white/10 transition-colors text-xs flex items-center gap-2"><i data-lucide="download" class="w-4 h-4"></i> Télécharger CV</a></div></div><div class="md:col-span-4 hidden md:flex justify-center opacity-50"><div class="w-full aspect-square border border-white/10 rounded-full relative animate-[spin_20s_linear_infinite]"><div class="absolute inset-4 border border-cyan-500/20 rounded-full border-dashed"></div><div class="absolute inset-12 border border-purple-500/20 rounded-full"></div></div></div></div></section><section id="exp" class="py-32 bg-black/50 backdrop-blur-sm border-t border-white/5 relative"><div class="absolute top-0 right-0 p-4 text-[10em] font-black text-white/5 leading-none pointer-events-none select-none">DATA</div><div class="container mx-auto px-6 grid lg:grid-cols-12 gap-16 relative z-10"><div class="lg:col-span-7"><h3 class="text-3xl font-black mb-16 uppercase text-white tracking-wider flex items-center gap-4"><i data-lucide="activity" class="text-cyan-400"></i> Historique Opérationnel</h3><div class="space-y-4">${experiencesHTML}</div></div><div class="lg:col-span-5"><div class="bg-white/5 border border-white/10 p-8 rounded-2xl sticky top-10"><h3 class="text-xl font-black mb-8 uppercase text-white tracking-wider flex items-center gap-4"><i data-lucide="cpu" class="text-cyan-400"></i> Arsenal Technique</h3><div class="space-y-2">${skillsHTML}</div><div class="mt-12"><h3 class="text-xl font-black mb-8 uppercase text-white tracking-wider flex items-center gap-4"><i data-lucide="heart" class="text-cyan-400"></i> Intérêts</h3><div class="grid gap-4">${passionsHTML}</div></div></div></div></div></section><footer class="py-12 text-center border-t border-white/10 text-gray-600 font-mono text-xs uppercase">Architecture by Nexus Genesis // User: ${data.name}</footer><script>lucide.createIcons()${"<" + "/script>"}</body></html>`;
        }

        // --- TEMPLATE GENERATOR: VANGUARD ---
        function getVanguardHTML(data) {
            const firstName = data.name.split(' ')[0] || "USER";
            const lastName = data.name.split(' ').slice(1).join(' ') || "NAME";
            
            const experiencesHTML = data.experiences.map((exp) => `
               <div class="group relative py-12 border-b border-white/20 hover:bg-white/5 transition-colors cursor-pointer work-item hover-trigger">
                    <div class="grid grid-cols-1 md:grid-cols-12 gap-4 items-center relative z-10">
                        <div class="md:col-span-2 text-[#ccff00] font-mono text-sm">${exp.company}</div>
                        <div class="md:col-span-6">
                            <h3 class="text-3xl md:text-5xl font-display font-bold uppercase group-hover:pl-4 transition-all">${exp.title}</h3>
                        </div>
                        <div class="md:col-span-4 text-right md:text-left text-gray-400">Voir les détails</div>
                    </div>
                    <div class="max-h-0 overflow-hidden group-hover:max-h-40 transition-all duration-500 ease-in-out relative z-10">
                        <p class="pt-6 md:ml-[16.6%] max-w-2xl text-lg text-gray-300">${exp.desc}</p>
                    </div>
                </div>
            `).join('');

            const skillsHTML = data.skills.map(skill => `
                <span class="skill-tag text-2xl hover-trigger">${skill.name}</span>
            `).join('');

            // New Brutalist Passions List (Text Only)
            const passionsHTML = data.passions.map(pass => `
                <div class="border-t border-black py-8 hover:bg-white hover:text-black transition-all group cursor-default">
                    <h3 class="text-4xl font-bold uppercase mb-2 group-hover:translate-x-4 transition-transform">${pass.name}</h3>
                    <p class="text-gray-500 group-hover:text-black group-hover:translate-x-4 transition-transform delay-75">${pass.desc}</p>
                </div>
            `).join('');

            return `<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>${data.name} - Vanguard</title><script src="https://cdn.tailwindcss.com">${"<" + "/script>"}<script src="https://unpkg.com/lucide@latest">${"<" + "/script>"}<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&family=Syne:wght@400;700;800&display=swap" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js">${"<" + "/script>"}<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js">${"<" + "/script>"}<style>:root{--bg-color:#f2f2f0;--text-color:#111111;--accent-color:#ccff00;}body{background-color:var(--bg-color);color:var(--text-color);font-family:'Space Grotesk',sans-serif;overflow-x:hidden;cursor:none;margin:0;padding:0;}h1,h2,h3,h4,.font-display{font-family:'Syne',sans-serif;}#cursor-dot,#cursor-outline{position:fixed;top:0;left:0;transform:translate(-50%,-50%);border-radius:50%;z-index:9999;pointer-events:none;mix-blend-mode:difference;}#cursor-dot{width:12px;height:12px;background-color:white;}#cursor-outline{width:60px;height:60px;border:1px solid white;background-color:rgba(255,255,255,0.1);transition:width 0.2s,height 0.2s;}body.hover-active #cursor-outline{width:100px;height:100px;background-color:white;}.huge-text{font-size:clamp(3rem,12vw,12rem);line-height:0.85;letter-spacing:-0.04em;font-weight:800;text-transform:uppercase;}.contact-text{font-size:clamp(3rem,10vw,8rem);line-height:0.9;}.stroke-text{-webkit-text-stroke:2px var(--text-color);color:transparent;transition:all 0.5s ease;}.stroke-text:hover{color:var(--text-color);}.skill-tag{border:1px solid var(--text-color);padding:10px 20px;border-radius:50px;transition:all 0.3s ease;background:transparent;display:inline-block;margin:5px;}.skill-tag:hover{background:var(--text-color);color:var(--accent-color);transform:translateY(-5px);}.nav-link:hover{text-decoration:underline;}</style></head><body class="antialiased"><div id="cursor-dot"></div><div id="cursor-outline"></div><nav class="fixed top-0 left-0 w-full p-6 flex justify-between items-center z-50 mix-blend-exclusion text-white md:text-black md:mix-blend-normal"><div class="text-xl font-bold font-display tracking-tighter">EP.25 ©</div><div class="hidden md:flex gap-8 text-sm uppercase font-bold tracking-widest"><a href="#hero" class="nav-link text-black hover-trigger">Profil</a><a href="#work" class="nav-link text-black hover-trigger">Projets</a><a href="#skills" class="nav-link text-black hover-trigger">Arsenal</a><a href="#contact" class="px-6 py-2 bg-black text-[#ccff00] rounded-full hover:bg-[#ccff00] hover:text-black transition-colors hover-trigger">Contact</a></div></nav><main><section id="hero" class="min-h-screen flex flex-col justify-center px-4 md:px-12 pt-20 relative overflow-hidden"><div class="absolute top-1/4 right-0 w-[40vw] h-[40vw] bg-[#ccff00] rounded-full blur-[100px] opacity-20 animate-pulse"></div><div class="relative z-10"><p class="text-sm md:text-lg uppercase tracking-widest mb-4 border-l-2 border-black pl-4 font-bold">Portfolio 2025</p><h1 class="huge-text leading-[0.8]"><div><span class="block">${firstName}</span></div><div><span class="block ml-[10vw] text-[#ccff00] drop-shadow-lg" style="-webkit-text-stroke: 2px black;">${lastName}</span></div></h1></div><div class="mt-12 md:mt-24 grid grid-cols-1 md:grid-cols-12 gap-8 items-start"><div class="md:col-span-4 md:col-start-9"><p class="text-lg md:text-xl font-medium leading-relaxed">${data.role}<br><br>${data.bio}</p><div class="mt-8 flex gap-4"><a href="#work" class="group flex items-center gap-2 border-b-2 border-black pb-1 hover-trigger"><span>EXPLORER</span><i data-lucide="arrow-down-right"></i></a><a href="${data.cv}" class="group flex items-center gap-2 border-b-2 border-transparent hover:border-black pb-1 text-gray-500 hover:text-black transition-all hover-trigger"><span>CV.PDF</span><i data-lucide="download"></i></a></div></div></div></section><section id="work" class="py-24 px-4 md:px-12 bg-black text-[#f2f2f0] rounded-t-[3rem] relative z-20"><div class="flex flex-col md:flex-row justify-between items-end mb-24 border-b border-white/20 pb-8"><h2 class="text-6xl md:text-8xl font-display font-bold uppercase">Work<br><span class="text-[#ccff00]">History</span></h2></div><div class="space-y-0">${experiencesHTML}</div></section><section id="skills" class="py-24 px-4 md:px-12"><div class="grid grid-cols-1 lg:grid-cols-2 gap-20"><div><h2 class="text-5xl font-display font-bold mb-12">ARSENAL</h2><div class="flex flex-wrap gap-4">${skillsHTML}</div></div><div><h2 class="text-5xl font-display font-bold mb-12">PASSIONS</h2><div class="flex flex-col">${passionsHTML}</div></div></div></section><section id="contact" class="min-h-screen px-4 md:px-12 py-24 bg-[#ccff00] text-black relative flex flex-col justify-between"><div class="grid grid-cols-1 md:grid-cols-2 gap-16 md:gap-24 items-start"><div><h2 class="contact-text font-display font-black tracking-tighter mb-8 leading-none">LET'S<br>TALK.</h2><div class="space-y-4 text-xl font-medium mt-12"><a href="mailto:${data.email}" class="block border-b border-black pb-2 hover:pl-4 transition-all hover-trigger">${data.email}</a></div></div><form class="space-y-8 mt-12 md:mt-4" onsubmit="event.preventDefault(); window.location.href='mailto:${data.email}?subject=Contact Portfolio&body=Nom: '+this.querySelector('#form-name').value+'%0D%0AEmail: '+this.querySelector('#form-email').value+'%0D%0AMessage: '+this.querySelector('#form-msg').value;"><div class="group"><label class="block text-xs font-bold uppercase mb-2">Identité</label><input type="text" id="form-name" placeholder="Votre nom" class="w-full bg-transparent border-b-2 border-black py-4 placeholder-black/50 focus:outline-none focus:border-white transition-colors text-lg"></div><div class="group"><label class="block text-xs font-bold uppercase mb-2">Contact</label><input type="email" id="form-email" placeholder="Votre email" class="w-full bg-transparent border-b-2 border-black py-4 placeholder-black/50 focus:outline-none focus:border-white transition-colors text-lg"></div><div class="group"><label class="block text-xs font-bold uppercase mb-2">Brief</label><textarea id="form-msg" rows="3" placeholder="Parlons projet..." class="w-full bg-transparent border-b-2 border-black py-4 placeholder-black/50 focus:outline-none focus:border-white transition-colors resize-none text-lg"></textarea></div><button type="submit" class="w-full bg-black text-white py-6 text-xl font-display font-bold uppercase hover:bg-white hover:text-black transition-colors hover-trigger mt-4">Envoyer le message</button></form></div><footer class="mt-24 pt-8 border-t border-black font-bold uppercase">© 2025 ${data.name} // Vanguard Edition</footer></section></main><script>lucide.createIcons();const cursorDot=document.getElementById('cursor-dot');const cursorOutline=document.getElementById('cursor-outline');window.addEventListener('mousemove',(e)=>{const posX=e.clientX;const posY=e.clientY;cursorDot.style.left=\`\${posX}px\`;cursorDot.style.top=\`\${posY}px\`;cursorOutline.animate({left:\`\${posX}px\`,top:\`\${posY}px\`},{duration:500,fill:"forwards"});});const hoverTriggers=document.querySelectorAll('.hover-trigger, a, button, .work-item');hoverTriggers.forEach(trigger=>{trigger.addEventListener('mouseenter',()=>{document.body.classList.add('hover-active');});trigger.addEventListener('mouseleave',()=>{document.body.classList.remove('hover-active');});});${"<" + "/script>"}</body></html>`;
        }

        function updatePreview() {
            const data = getDataFromForm();
            let html = "";
            
            if(currentTheme === 'vanguard') {
                html = getVanguardHTML(data);
            } else {
                html = getOrionHTML(data);
            }

            const iframe = document.getElementById('preview-frame');
            iframe.srcdoc = html;
            iframe.onload = function() {
                try {
                    const doc = iframe.contentDocument || iframe.contentWindow.document;
                    
                    // PATCH: Allow navigation inside preview
                    doc.querySelectorAll('a').forEach(a => {
                        a.onclick = function(e) {
                            const href = a.getAttribute('href');
                            
                            // Allow anchor links (scrolling)
                            if (href && href.startsWith('#')) {
                                return true; // Default behavior
                            }
                            
                            // Block external links
                            e.preventDefault();
                            const toast = document.getElementById('preview-toast');
                            toast.classList.remove('hidden');
                            setTimeout(() => toast.classList.add('hidden'), 2500);
                            return false;
                        }
                    });
                } catch(e) {}
            }
        }

        function exportPortfolio() {
            const data = getDataFromForm();
            let html = "";
            let filename = "index.html";

            if(currentTheme === 'vanguard') {
                html = getVanguardHTML(data);
                filename = `vanguard_${data.name.split(' ')[0].toLowerCase()}.html`;
            } else {
                html = getOrionHTML(data);
                filename = `orion_${data.name.split(' ')[0].toLowerCase()}.html`;
            }

            const blob = new Blob([html], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a'); a.href = url; a.download = filename; document.body.appendChild(a); a.click(); document.body.removeChild(a);
            setTimeout(toggleGithubTuto, 1000);
        }

        // --- EXPERIENCES & SKILLS & PASSIONS MANAGEMENT ---
        function createExperienceHTML(title="", company="", desc="") {
            return `<div class="exp-item list-item-anim p-4 border border-white/10 rounded bg-white/5 relative group"><button onclick="this.parentElement.remove(); updatePreview()" class="absolute top-2 right-2 p-1 text-red-500 hover:bg-red-500/20 rounded opacity-50 group-hover:opacity-100 transition-all hover-trigger"><i data-lucide="trash-2" class="w-4 h-4"></i></button><div class="text-cyan-400 text-xs mono mb-2">EXPERIENCE</div><input type="text" class="exp-title w-full p-2 mb-2 rounded cyber-input text-sm" placeholder="Intitulé du poste" value="${title}" oninput="updatePreview()"><input type="text" class="exp-company w-full p-2 mb-2 rounded cyber-input text-sm" placeholder="Entreprise / Date" value="${company}" oninput="updatePreview()"><textarea class="exp-desc w-full p-2 rounded cyber-input text-xs" rows="2" placeholder="Description courte..." oninput="updatePreview()">${desc}</textarea></div>`;
        }
        function createSkillHTML(name="", val="50") {
            return `<div class="skill-item list-item-anim flex gap-2 items-center group"><input type="text" class="skill-name w-2/3 p-2 rounded cyber-input text-sm" placeholder="Nom (ex: Photoshop)" value="${name}" oninput="updatePreview()"><input type="number" class="skill-val w-1/4 p-2 rounded cyber-input text-sm" placeholder="%" value="${val}" max="100" oninput="updatePreview()"><button onclick="this.parentElement.remove(); updatePreview()" class="p-2 text-red-500 hover:bg-red-500/20 rounded opacity-50 group-hover:opacity-100 transition-all hover-trigger"><i data-lucide="trash-2" class="w-4 h-4"></i></button></div>`;
        }
        function createPassionHTML(name="", desc="") {
            return `<div class="passion-item list-item-anim p-4 border border-white/10 rounded bg-white/5 relative group"><button onclick="this.parentElement.remove(); updatePreview()" class="absolute top-2 right-2 p-1 text-red-500 hover:bg-red-500/20 rounded opacity-50 group-hover:opacity-100 transition-all hover-trigger"><i data-lucide="trash-2" class="w-4 h-4"></i></button><div class="text-cyan-400 text-xs mono mb-2">PASSION</div><input type="text" class="passion-name w-full p-2 mb-2 rounded cyber-input text-sm" placeholder="Titre (ex: Basket-Ball)" value="${name}" oninput="updatePreview()"><textarea class="passion-desc w-full p-2 rounded cyber-input text-xs" rows="2" placeholder="Détails..." oninput="updatePreview()">${desc}</textarea></div>`;
        }

        function addExperience(title, company, desc) { document.getElementById('experience-list').insertAdjacentHTML('beforeend', createExperienceHTML(title, company, desc)); lucide.createIcons(); updatePreview(); }
        function addSkill(name, val) { document.getElementById('skills-list').insertAdjacentHTML('beforeend', createSkillHTML(name, val)); lucide.createIcons(); updatePreview(); }
        function addPassion(name, desc) { document.getElementById('passions-list').insertAdjacentHTML('beforeend', createPassionHTML(name, desc)); lucide.createIcons(); updatePreview(); }

        // --- AI GENERATION ---
        async function generateAIBio() {
            const name = document.getElementById('input-name').value;
            const role = document.getElementById('input-role').value;
            const currentBio = document.getElementById('input-bio').value;
            const loader = document.getElementById('ai-loading');
            loader.classList.remove('hidden');
            const prompt = `Rephrase this bio to make it ultra-professional, futuristic and impactful for a portfolio. Use French. Keep it under 300 characters. Name: ${name} Role: ${role} Current Bio: ${currentBio}`;
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }) });
                const data = await response.json();
                if (data.error) throw new Error(data.error.message);
                const newBio = data.candidates[0].content.parts[0].text;
                const bioField = document.getElementById('input-bio');
                let i = 0; bioField.value = "";
                const typeInterval = setInterval(() => { bioField.value += newBio.charAt(i); i++; if (i > newBio.length) { clearInterval(typeInterval); updatePreview(); } }, 20);
            } catch (error) { alert("Erreur AI: " + error.message); } finally { loader.classList.add('hidden'); }
        }

        // --- INITIALIZATION ---
        window.addEventListener('load', () => {
            try {
                lucide.createIcons();
                // Load default data empty or placeholder
                addExperience('Responsable Marketing', 'Printeknologies', 'Pilotage stratégie numérique et SEO.');
                addExperience('Web Designer', 'Freelance', 'Création d\'interfaces UI/UX modernes.');
                document.getElementById('skills-list').innerHTML = ''; 
                addSkill('Stratégie', '85'); 
                addSkill('SEO', '90'); 
                addSkill('Design', '75');
                document.getElementById('passions-list').innerHTML = '';
                addPassion('Basket-Ball', 'Compétition niveau régional');
                addPassion('Photographie', 'Street photography & Portraits');
                
                updatePreview();
                
                // Cursor Logic Fixed
                const cursor = document.getElementById('cursor'); 
                const cursorDot = document.getElementById('cursor-dot');
                document.addEventListener('mousemove', (e) => { 
                    cursorDot.style.left = e.clientX + 'px'; 
                    cursorDot.style.top = e.clientY + 'px'; 
                    setTimeout(() => { cursor.style.transform = `translate(${e.clientX - 10}px, ${e.clientY - 10}px)`; }, 50); 
                });
                
                document.querySelectorAll('.hover-trigger').forEach(el => { 
                    el.addEventListener('mouseenter', () => document.body.classList.add('hovering')); 
                    el.addEventListener('mouseleave', () => document.body.classList.remove('hovering')); 
                });
                
                // Particle Canvas
                const canvas = document.getElementById('particle-canvas'); const ctx = canvas.getContext('2d'); canvas.width = window.innerWidth; canvas.height = window.innerHeight;
                const particles = Array.from({length: 50}).map(() => ({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, size: Math.random() * 2, speedX: (Math.random() - 0.5) * 0.5, speedY: (Math.random() - 0.5) * 0.5 }));
                function animateParticles() { ctx.clearRect(0, 0, canvas.width, canvas.height); ctx.fillStyle = '#00f3ff'; particles.forEach(p => { p.x += p.speedX; p.y += p.speedY; if(p.x < 0 || p.x > canvas.width) p.speedX *= -1; if(p.y < 0 || p.y > canvas.height) p.speedY *= -1; ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2); ctx.fill(); }); requestAnimationFrame(animateParticles); }
                animateParticles();
            } catch(e) { console.error("Init Error:", e); }
        });
    </script>
</body>
</html>